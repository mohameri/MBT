{{- /* =========================================================== */ -}}
{{- /* Ø¨Ø¯Ø§ÙŠØ© Ù…Ù„Ù Header (Ù†Ø³Ø®Ø© Ø§Ù„Ø¥ØµÙ„Ø§Ø­ ÙˆØ§Ù„Ø§Ø³ØªÙ‚Ø±Ø§Ø±) */ -}}
{{- /* =========================================================== */ -}}

{{- if (not site.Params.disableThemeToggle) }}
    {{- if (eq site.Params.defaultTheme "light") }}
        <script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}</script>
    {{- else if (eq site.Params.defaultTheme "dark") }}
        <script>if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}</script>
    {{- else }}
        <script>
            if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}
            else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}
            else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}
        </script>
    {{- end }}
{{- else if (and (ne site.Params.defaultTheme "light") (ne site.Params.defaultTheme "dark"))}}
    <script>if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script>
{{- end }}

<header class="header">
    <nav class="nav">
        <div class="logo">
            {{- $label_text := (site.Params.label.text | default site.Title) }}
            {{- if site.Title }}
            <a href="{{ "home/" | relLangURL }}" accesskey="h" title="{{ $label_text }} (Alt + H)">
                {{- if site.Params.label.icon }}
                    <img src="{{ site.Params.label.icon | absURL }}" alt="logo" height="{{- site.Params.label.iconHeight | default "30" -}}">
                {{- end -}}
                {{- $label_text -}}
            </a>
            {{- end }}

            {{- /* Ø²Ø± Ø§Ù„Ø¹Ù…Ù„Ø© (Ù…ÙˆØ¬ÙˆØ¯ Ù‡Ù†Ø§ ÙˆØ³ÙŠØªØ­ÙˆÙ„ Ù„Ø´Ø±ÙŠØ· Ø³ÙÙ„ÙŠ ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø¹Ø¨Ø± CSS ÙÙ‚Ø·) */ -}}
            <div class="currency-wrapper">
                <select id="currency-selector" onchange="changeCurrency()">
                    <option value="IQD">ğŸ‡®ğŸ‡¶ Ø¯ÙŠÙ†Ø§Ø±</option>
                    <option value="USD">ğŸ‡ºğŸ‡¸ Ø¯ÙˆÙ„Ø§Ø±</option>
                    <option value="AED">ğŸ‡¦ğŸ‡ª Ø¯Ø±Ù‡Ù…</option>
                    <option value="SAR">ğŸ‡¸ğŸ‡¦ Ø±ÙŠØ§Ù„</option>
                </select>
            </div>

            <div class="logo-switches">
                {{- if (not site.Params.disableThemeToggle) }}
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                </button>
                {{- end }}
            </div>
        </div>

        {{- $currentPage := . }}
        <ul id="menu">
            {{- /* Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚: Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ ÙˆÙŠØ¸Ù‡Ø± ÙÙ‚Ø· ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */ -}}
            <li class="menu-close-btn" onclick="toggleMobileMenu()">âœ• Ø¥ØºÙ„Ø§Ù‚</li>
            
            {{- range site.Menus.main }}
            <li>
                <a href="{{ .URL | absLangURL }}" title="{{ .Title | default .Name }}">
                    <span>{{ .Name }}</span>
                </a>
            </li>
            {{- end }}
        </ul>
        
        <button id="hamburger-btn" onclick="toggleMobileMenu()" aria-label="Menu">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </button>
    </nav>
</header>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Almarai:wght@400;700;800&display=swap');

    /* --- 1. Ø¥ØµÙ„Ø§Ø­ Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ (Ø£Ù‡Ù… Ø®Ø·ÙˆØ©) --- */
    .menu-close-btn {
        display: none; /* Ù…Ø®ÙÙŠ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± */
        padding: 15px;
        text-align: center;
        background: #222;
        color: #fff;
        cursor: pointer;
        border-bottom: 1px solid #333;
        font-family: 'Almarai', sans-serif;
    }

    /* --- 2. ØªØµÙ…ÙŠÙ… Ø²Ø± Ø§Ù„Ø¹Ù…Ù„Ø© Ù„Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (Clean Style) --- */
    #currency-selector {
        font-family: 'Almarai', sans-serif !important;
        font-weight: 700;
        font-size: 0.9rem;
        appearance: none; -webkit-appearance: none; -moz-appearance: none;
        
        background: linear-gradient(135deg, rgba(40, 40, 40, 0.95), rgba(10, 10, 10, 1));
        color: #FFD700;
        border: 1px solid #FFD700;
        
        /* Ø¶Ø¨Ø· Ø§Ù„Ø­Ø´Ùˆ Ø¨Ø¯Ù‚Ø© Ù„Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø© ÙÙŠ ÙˆÙŠÙ†Ø¯ÙˆØ² */
        padding: 6px 30px 6px 15px; /* Ø§Ù„ÙŠÙ…ÙŠÙ† 30 Ù„Ù„Ø³Ù‡Ù…ØŒ Ø§Ù„ÙŠØ³Ø§Ø± 15 Ù„Ù„Ù†Øµ */
        min-width: 140px;
        border-radius: 50px;
        cursor: pointer;
        outline: none;
        margin-inline-start: 15px;
        
        /* Ø¥Ø¬Ø¨Ø§Ø± Ø§Ù„Ù†Øµ Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„ØªÙØ§Ø¯ÙŠ ØªØ¯Ø§Ø®Ù„ Ø§Ù„Ø³Ù‡Ù… */
        text-align: left; 
        text-indent: 5px;

        background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23FFD700%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
        background-repeat: no-repeat;
        background-position: right 12px center; /* Ø§Ù„Ø³Ù‡Ù… ÙŠÙ…ÙŠÙ† */
        background-size: 10px;
    }
    
    #currency-selector option { background-color: #222; color: #fff; padding: 10px; }

    /* --- 3. ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ (Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø³ÙÙ„ÙŠ) --- */
    @media screen and (max-width: 850px) {
        
        /* Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙÙ‚Ø· */
        .menu-close-btn { display: block; }

        /* ØªØ­ÙˆÙŠÙ„ Ø²Ø± Ø§Ù„Ø¹Ù…Ù„Ø© Ù„Ø´Ø±ÙŠØ· Ø³ÙÙ„ÙŠ */
        .currency-wrapper {
            position: fixed;
            bottom: 20px;
            left: 0; 
            width: 100%;
            display: flex;
            justify-content: center;
            z-index: 9999;
            pointer-events: none; /* ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„Ø¶ØºØ· Ø­ÙˆÙ„ Ø§Ù„Ø²Ø± */
        }

        #currency-selector {
            pointer-events: auto; /* ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± */
            width: 90%;
            height: 50px;
            font-size: 16px;
            margin: 0;
            
            background-color: #1a1a1a !important;
            box-shadow: 0 10px 30px rgba(0,0,0,0.9);
            
            /* ØªÙˆØ³ÙŠØ· Ø§Ù„Ù†Øµ ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
            text-align: center;
            text-indent: 0;
            padding: 0;
            
            /* Ø§Ù„Ø³Ù‡Ù… ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
            background-position: left 20px center;
        }

        /* Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù‡ÙŠØ¯Ø± Ù„ÙŠØ¸Ù‡Ø± Ø¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠ */
        .logo { justify-content: space-between; width: 100%; }
        #hamburger-btn { display: block; }
        #menu { 
            /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (PaperMod Default) */
            display: none; 
            position: fixed; top: 0; right: 0; bottom: 0; 
            background: var(--entry); width: 250px; 
            box-shadow: -5px 0 10px rgba(0,0,0,0.1);
            padding: 0; list-style: none; z-index: 1000;
            flex-direction: column;
        }
        #menu.menu-open { display: flex; }
    }
    
    /* Ø¥Ø®ÙØ§Ø¡ Ø²Ø± Ø§Ù„Ù‡Ù…Ø¨Ø±ØºØ± ÙÙŠ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± */
    @media screen and (min-width: 851px) {
        #hamburger-btn { display: none; }
        #menu { display: flex !important; background: transparent; box-shadow: none; width: auto; position: static; height: auto;}
    }
</style>

<script>
    function toggleMobileMenu() {
        document.getElementById('menu').classList.toggle('menu-open');
    }
</script>